# Configuración para Angular SPA y Callbacks de Pago
RewriteEngine On

# Permitir redirecciones POST a payment-callback.html
RewriteCond %{REQUEST_METHOD} POST
RewriteCond %{REQUEST_URI} ^/payment-callback\.html$
RewriteRule ^(.*)$ /payment-callback.html [L]

# Redirigir todas las demás solicitudes a index.html (SPA)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.html [L]

# Configuración de CORS para permitir callbacks de plataformas de pago
<IfModule mod_headers.c>
    # Permitir solicitudes desde cualquier origen para payment-callback
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization"
</IfModule>
