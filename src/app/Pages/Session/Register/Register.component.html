<div class="form-container">
    <div class="form-wrapper">
        <form [formGroup]="registerForm" (ngSubmit)="register_user_front()">
            <div class="cardpage">
                <!-- Información Personal -->
                <h4>Información Personal</h4>
                <br>
                <div class="row">
                    <div class="col-sm">
                        <label>Nombres<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="Nombres" formControlName="name" class="form-control" required
                            maxlength="30">
                        <mat-error
                            *ngIf="registerForm.get('name')?.hasError('required') && registerForm.get('name')?.touched">
                            Los nombres son obligatorios
                        </mat-error>
                    </div>
                    <div class="col-sm">
                        <label>Apellidos<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="Apellidos" formControlName="second_name" class="form-control"
                            required maxlength="30">
                        <mat-error
                            *ngIf="registerForm.get('second_name')?.hasError('required') && registerForm.get('second_name')?.touched">
                            Los apellidos son obligatorios
                        </mat-error>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm">
                        <label>Tipo de identificación<b class="obligatory"> *</b></label>
                        <ng-select [items]="identifier$ | async" bindLabel="type_identifier" bindValue="id"
                            formControlName="identifiersCtrl" required placeholder="Tipo de identificación">
                        </ng-select>
                        <mat-error
                            *ngIf="registerForm.get('identifiersCtrl')?.hasError('required') && registerForm.get('identifiersCtrl')?.touched">
                            El tipo de identificación es obligatorio
                        </mat-error>
                    </div>
                    <div class="col-sm">
                        <label>Número de identificación<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="Número de identificación" formControlName="number_identifier"
                            class="form-control" required maxlength="10">
                        <mat-error
                            *ngIf="registerForm.get('number_identifier')?.hasError('required') && registerForm.get('number_identifier')?.touched">
                            El número de identificación es obligatorio
                        </mat-error>
                        <mat-error
                            *ngIf="registerForm.get('number_identifier')?.hasError('pattern') && registerForm.get('number_identifier')?.touched">
                            Solo se aceptan números
                        </mat-error>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm">
                        <label>Email<b class="obligatory"> *</b></label>
                        <input type="email" placeholder="Email" formControlName="email" class="form-control" required
                            maxlength="50">
                        <mat-error
                            *ngIf="registerForm.get('email')?.hasError('required') && registerForm.get('email')?.touched">
                            El correo electrónico es obligatorio
                        </mat-error>
                        <mat-error
                            *ngIf="registerForm.get('email')?.hasError('pattern') && registerForm.get('email')?.touched">
                            Formato de email inválido
                        </mat-error>
                    </div>
                    <div class="col-sm">
                        <label>Password<b class="obligatory"> *</b></label>
                        <input type="password" placeholder="Password" formControlName="password" class="form-control"
                            required maxlength="50">
                        <mat-error
                            *ngIf="registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched">
                            La contraseña es obligatoria
                        </mat-error>
                        <mat-error
                            *ngIf="registerForm.get('password')?.hasError('minlength') && registerForm.get('password')?.touched">
                            La contraseña debe tener al menos 6 caracteres
                        </mat-error>
                    </div>
                </div>

                <!-- Agrega un domicilio -->
                <h4>Agrega un domicilio</h4>
                <br>
                <div class="row">
                    <div class="col-sm">
                        <label>Departamento<b class="obligatory"> *</b></label>
                        <ng-select [items]="depart$ | async" bindLabel="departament" formControlName="departamentCtrl"
                            (change)="citieChangeAction($event)" required placeholder="Departamento">
                        </ng-select>
                        <mat-error
                            *ngIf="registerForm.get('departamentCtrl')?.hasError('required') && registerForm.get('departamentCtrl')?.touched">
                            El departamento es obligatorio
                        </mat-error>
                    </div>
                    <div class="col-sm">
                        <label>Ciudad<b class="obligatory"> *</b></label>
                        <ng-select [items]="city$ | async" bindLabel="city" formControlName="citieCtrl" required
                            placeholder="Ciudad">
                        </ng-select>
                        <mat-error
                            *ngIf="registerForm.get('citieCtrl')?.hasError('required') && registerForm.get('citieCtrl')?.touched">
                            La ciudad es obligatoria
                        </mat-error>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm">
                        <label>Barrio<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="Barrio" formControlName="neighborhood" class="form-control"
                            required maxlength="80">
                        <mat-error
                            *ngIf="registerForm.get('neighborhood')?.hasError('required') && registerForm.get('neighborhood')?.touched">
                            El barrio es obligatorio
                        </mat-error>
                    </div>
                    <div class="col-sm">
                        <!-- Empty or maybe merge address fields here -->
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm">
                        <label>Via<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="Via" formControlName="via" class="form-control" required
                            maxlength="20">
                        <mat-error
                            *ngIf="registerForm.get('via')?.hasError('required') && registerForm.get('via')?.touched">
                            La vía es obligatoria
                        </mat-error>
                    </div>
                    <div class="col-sm">
                        <label>#<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="#" formControlName="number_streeth" class="form-control"
                            required maxlength="20">
                        <mat-error
                            *ngIf="registerForm.get('number_streeth')?.hasError('required') && registerForm.get('number_streeth')?.touched">
                            El número es obligatorio
                        </mat-error>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm">
                        <label>-<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="-" formControlName="sn" class="form-control" required
                            maxlength="20">
                        <mat-error
                            *ngIf="registerForm.get('sn')?.hasError('required') && registerForm.get('sn')?.touched">
                            El complemento es obligatorio
                        </mat-error>
                    </div>
                    <div class="col-sm"></div>
                </div>


                <div class="row">
                    <div class="col-12">
                        <label>Datos adicionales<b class="obligatory"> *</b></label>
                        <textarea formControlName="aditional_data" placeholder="Datos adicionales" class="form-control"
                            rows="3" required maxlength="200" style="height: auto;"></textarea>
                        <mat-error
                            *ngIf="registerForm.get('aditional_data')?.hasError('required') && registerForm.get('aditional_data')?.touched">
                            Los datos adicionales son obligatorios
                        </mat-error>
                    </div>
                </div>
                <br>
                <br>
                <!-- Información de Contacto -->
                <h4>Información de Contacto</h4>
                <br>
                <div class="row">
                    <div class="col-sm">
                        <label>Teléfono<b class="obligatory"> *</b></label>
                        <input type="tel" placeholder="Teléfono" formControlName="phone" class="form-control" required
                            maxlength="50" minlength="7">
                        <mat-hint>Mas de 7 digitos</mat-hint>
                        <mat-error
                            *ngIf="registerForm.get('phone')?.hasError('required') && registerForm.get('phone')?.touched">
                            El teléfono es obligatorio
                        </mat-error>
                        <mat-error
                            *ngIf="registerForm.get('phone')?.hasError('minlength') && registerForm.get('phone')?.touched">
                            El teléfono debe tener más de 7 dígitos
                        </mat-error>
                    </div>
                    <div class="col-sm">
                        <label>Persona de contacto<b class="obligatory"> *</b></label>
                        <input type="text" placeholder="Persona de contacto" formControlName="contact"
                            class="form-control" required maxlength="50">
                        <mat-error
                            *ngIf="registerForm.get('contact')?.hasError('required') && registerForm.get('contact')?.touched">
                            La persona de contacto es obligatoria
                        </mat-error>
                    </div>
                </div>
                <br>
                <br>
                <div class="mt-2" *ngIf="validate_user">
                    <li style="color:red">
                        <label style="color:red">
                            El usuario ya se encuentra registrado
                        </label>
                    </li>
                </div>

                <button class="color_button_ac mobile-register-btn" mat-raised-button type="submit"
                    [disabled]="registerForm.invalid || isLoading">
                    <mat-spinner *ngIf="isLoading" diameter="20"
                        style="display:inline-block; vertical-align: middle; margin-right: 5px;"></mat-spinner>
                    <span>{{isLoading ? 'Registrando...' : 'Crear tu cuenta'}}</span>
                </button>

                <div class="login-section" style="margin-top: 20px; text-align: center;">
                    <p class="login-text">
                        ¿Ya tienes una cuenta?
                        <a [routerLink]="['/session/signin']" class="login-link"
                            style="color: #79dc78; font-weight: bold;">
                            Entonces Ingresa
                        </a>
                    </p>
                </div>

            </div>
        </form>
    </div>
</div>