
<!-- <embryo-PageTitle heading="Payment Confirmation"></embryo-PageTitle> -->

<div class="inner-container" *ngIf="(embryoService.buyUserCartProducts && embryoService.buyUserCartProducts.length>0); else elseBlock">
  <div class="bg-white final-receipt-page section-gap" *ngIf="userDetails">
    <div class="final-receipt">
      <div class="container">
        <div fxLayout="row wrap" fxLayoutAlign="center center" class="col-gap">
          <div fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="60" fxFlex.lg="60" fxFlex.xl="60">
            <mat-card class="pt-0">
              <div id="payment-receipt">
              <div class="text-center bg-grey p-5 mat-card-pad-none">
                <h1>Transacción aprobada</h1>
                <h5 class="mb-4">El pago se proceso correctamente, tu pedido esta en camino </h5>
                <h6 class="mb-4">Transacción:{{invoiceDetails?.reference}}</h6>
                <img src="assets/images/checked.png" width="64" height="64" alt="Success">
              </div>
              <div class="py-5">
                <div fxLayout="row wrap" fxLayoutAlign="none" class="col-gap">
                  <div fxFlex.xs="100" fxFlex.sm="50" fxFlex.md="50" fxFlex.lg="50" fxFlex.xl="50">
                    <h6>Resumen</h6>
                    <p class="mb-1">Referencia: {{invoiceDetails?.reference}}</p>
                    <p class="mb-1">Número de aprobación: {{invoiceDetails?.num_aprob}}</p>
                    <p class="mb-1">Fecha: {{invoiceDetails?.date}} </p>
                    <!-- <p class="mb-1">Fecha: {{todayDate | date:'MMMM d, y'}} </p> -->
                    <p class="mb-1">Total: {{getTotalPrice() | currency:embryoService?.currency}}</p>
                  </div>
                  <div class="pb-4" fxFlex.xs="100" fxFlex.sm="50" fxFlex.md="50" fxFlex.lg="50" fxFlex.xl="50">
                    <h6>Enviar a</h6>
                    <p class="mb-1 text-capitalize">{{LocationDetail?.contact}}</p>
                    <p class="mb-1 text-capitalize">{{LocationDetail?.nameci}}</p>
                    <p class="mb-1 text-capitalize">{{LocationDetail?.neighborhood}}</p>                    
                    <p class="mb-1 text-capitalize">{{LocationDetail?.via}} # {{LocationDetail?.number}} - {{LocationDetail?.sn}}</p>
                    <p class="mb-1">Número de contacto. {{LocationDetail?.phone}}</p>
                  </div>
                </div>
                <h4 class="pt-5">Detalle del pedido</h4>
                <div fxLayout="row wrap" fxLayoutAlign="start center" class="col-gap" *ngFor="let product of embryoService.buyUserCartProducts">
                  <div fxFlex.xs="20" fxFlex.sm="25" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
                    <img width="100" [src]="product?.image" alt="cart Image">
                  </div>
                  <div fxFlex.xs="30" fxFlex.sm="25" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
                    <h6>Descripción</h6>
                    <p class="font-bold">{{product?.name}}</p>
                  </div>
                  <div fxFlex.xs="25" fxFlex.sm="25" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
                    <h6>Cantidad</h6>
                    <p *ngIf="product?.quantity">{{product?.quantity}}</p>
                    <p *ngIf="!product?.quantity">1</p>
                  </div>
                  <div fxFlex.xs="25" fxFlex.sm="25" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
                    <h6>Precio</h6>
                    <p>{{ calculateProductSinglePrice(product, product?.quantity) | currency:embryoService?.currency}}</p>
                  </div>
                </div>
                <hr class="dark-border spacer">
                <div class="text-right ">
                  <div>
                    <p>Subtotal</p><span fxFlex></span> {{calculateTotalPrice() | currency:embryoService?.currency}}
                  </div>
                  <!-- <div>
                    <p>Shipping</p><span fxFlex></span> {{embryoService.shipping | currency:embryoService?.currency}}
                  </div>
                  <div>
                    <p>Tax(GST)</p><span fxFlex></span> {{embryoService.tax | currency:embryoService?.currency}}
                  </div> -->
                  <hr class="spacer">
                  <div class="mb-4">
                    <h4>Total</h4><span fxFlex></span>
                    <h4> {{getTotalPrice() | currency:embryoService?.currency}}</h4>
                  </div>
                </div>
              </div>
              </div>
              <div class="btn-group">
              
              <button mat-raised-button color="accent" type="button">Descargar PDF</button>
              <button mat-raised-button color="accent" [routerLink]="['/']">Pagina principal</button>
            </div>
            </mat-card>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #elseBlock>
  <div class="section-gap-lg text-center">
    <div class="mb-4">
    <svg width="128" height="128" viewBox="0 0 24 24" fill="none">
      <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill="#34d399"/>
    </svg>
  </div>
    <h4> Tu carrito de compras está vacío.</h4>
    <a href="javascript:void(0)" class="primary-color" (click)="goToHome()">Continuar Comprando</a>
  </div>
</ng-template>
